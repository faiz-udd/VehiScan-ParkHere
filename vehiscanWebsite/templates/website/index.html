{% extends 'master.html' %}

{% block title %}Home{% endblock %}
{% load static %}
{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

{% endblock %}

{% block main %}
<!-- Hero Section -->
<section class="hero-section text-light py-5 rounded-3" style="background-color: #343a40;">
    <div class="container">
        <div class="row align-items-center g-5">
            <div class="col-lg-6">
                <h1 class="display-6 fw-bold mb-4">Find & Reserve Parking Spaces</h1>
                <div class="d-flex align-items-center gap-3 mb-5">
                    <div class="bg-light text-dark px-4 py-2 rounded-pill d-inline-flex align-items-center">
                        <i class="fas fa-star me-2 text-warning"></i>
                        4.9/5 (2,500+ reviews)
                    </div>
                </div>
                <ul class="list-unstyled lead font-bold">
                    <li class="mb-3"><i class="fas fa-check-circle me-2"></i>Real-time availability</li>
                    <li class="mb-3"><i class="fas fa-check-circle me-2"></i>Secure instant Parking Space</li>
                    <li><i class="fas fa-check-circle me-2"></i>24/7 Service</li>
                </ul>
            </div>
            
            <div class="col-lg-6">
                <div class="search-box p-4 rounded-3 shadow-sm" style="background-color:#2dc98a;">
                    <form action="{% url 'parking-lots' %}" method="get">
                        <div class="mb-4">
                            <label class="form-label fw-bold mb-3">Find parking near</label>
                            <div class="input-group">
                                <span class="input-group-text bg-primary text-white">
                                    <i class="fas fa-map-marker-alt"></i>
                                </span>
                                <input type="text" name="location" class="form-control form-controls-lg" 
                                       placeholder="Enter postcode, city or airport" required>
                            </div>
                        </div>

                        {% comment %} <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Arrival</label>
                                <input type="datetime-local" name="start_time" 
                                       class="form-control form-control-lg" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Duration</label>
                                <select name="duration" class="form-select form-select-lg">
                                    <option value="1">1 hour</option>
                                    <option value="2">2 hours</option>
                                    <option value="4">4 hours</option>
                                    <option value="24">Full day</option>
                                </select>
                            </div>
                        </div> {% endcomment %}

                        <div class="d-flex justify-content-center">
                            <button type="submit" class="btn btn-primary w-50 fw-bold">
                                Search Parking Spaces
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="feature-icon">
                        <i class="fas fa-parking bg-success"></i>
                    </div>
                    <h3 class="mb-3">50,000+ Spaces</h3>
                    <p class="text-muted">Nationwide coverage with verified parking locations</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="mb-3">Real-Time Updates</h3>
                    <p class="text-muted">Live availability with AI</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="feature-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h3 class="mb-3">Secure Parking</h3>
                    <p class="text-muted">Verified parking spaces with 24/7 security</p>
                    
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="py-5 bg-white">
    <div class="container">
        <h2 class="section-heading text-center mb-5">Live Parking Availability</h2>
        <div class="row justify-content-center">
            <div class="col-lg-15">
                <div class="card shadow-sm border-0">
                    <div class="card-body p-0">
                        <div class="map-container" id="parkingMap" style="height: 420px; border-radius: 0.5rem; overflow: hidden;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section text-light" style="background-color: #343a40;">
    <div class="container text-center py-5">
        <h2 class="display-5 fw-bold mb-4">Start Parking Smarter Today</h2>
        <p class="lead mb-5">Join our community of 5000+ satisfied drivers</p>
        <div class="d-flex gap-3 justify-content-center">
            <a href="{% url 'register-user' %}" class="btn btn-primary btn-lg px-5 py-3 fw-bold">
                Get Started Free
            </a>
            <a href="{% url 'parking-lots' %}" class="btn btn-outline-light btn-lg px-5 py-3 fw-bold">
                Browse Spaces
            </a>
        </div>
    </div>
</section>

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<!-- Preserved Original Map Functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const map = L.map('parkingMap').setView([33.6995, 73.0363], 5);
    
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const locations = [
        {% for parking_lot in parking_lots %}
        {
            lat: {{ parking_lot.latitude }},
            lng: {{ parking_lot.longitude }},
            name: "{{ parking_lot.name }}"
        },
        {% endfor %}
    ];

    locations.forEach(location => {
        const marker = L.marker([location.lat, location.lng]).addTo(map);
        marker.bindPopup(`<b>${location.name}</b>`);
    });

    document.querySelector('form').addEventListener('submit', function(e) {
        if (!this.checkValidity()) {
            e.preventDefault();
            this.classList.add('was-validated');
        }
    });
});
</script>
{% endblock %}
{% endblock %}